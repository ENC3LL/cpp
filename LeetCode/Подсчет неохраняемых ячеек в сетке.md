# ะะพะดััะตั ะฝะตะพััะฐะฝัะตะผัั ััะตะตะบ ะฒ ัะตัะบะต

ะะฐะผ ะดะฐะฝั ะดะฒะฐ ัะตะปัั ัะธัะปะฐ, ะฟัะตะดััะฐะฒะปัััะธะต ัะตัะบั ัย**ะธะฝะดะตะบัะพะผ 0**. ะะฐะผ ัะฐะบะถะต ะดะฐะฝั ะดะฒะฐ 2D ัะตะปะพัะธัะปะตะฝะฝัั ะผะฐััะธะฒะฐ, ะธ ะณะดะต ะธ ะฟัะตะดััะฐะฒะปััั ะฟะพะปะพะถะตะฝะธั ะพััะฐะฝะฝะธะบะฐ ะธ ััะตะฝั ัะพะพัะฒะตัััะฒะตะฝะฝะพ.`m``n``m x n``guards``walls``guards[i] = [rowi, coli]``walls[j] = [rowj, colj]``ith``jth`

ะััะฐะฝะฝะธะบ ะผะพะถะตั ะฒะธะดะตััย**ะบะฐะถะดัั**ยะบะปะตัะบั ะฒ ัะตัััะตั ะพัะฝะพะฒะฝัั ะฝะฐะฟัะฐะฒะปะตะฝะธัั (ัะตะฒะตั, ะฒะพััะพะบ, ัะณ ะธะปะธ ะทะฐะฟะฐะด), ะฝะฐัะธะฝะฐั ั ะธั ะฟะพะทะธัะธะธ, ะตัะปะธ ัะพะปัะบะพย**ะตะน ะฝะต ะผะตัะฐะตั**ยััะตะฝะฐ ะธะปะธ ะดััะณะพะน ะพััะฐะฝะฝะธะบ. ะะปะตัะบะฐย**ััะธัะฐะตััั ะพััะฐะฝัะตะผะพะน**, ะตัะปะธ ะตัััย**ัะพัั ะฑั**ยะพะดะธะฝ ะพััะฐะฝะฝะธะบ, ะบะพัะพััะน ะผะพะถะตั ะตะต ะฒะธะดะตัั.

ะะพะทะฒัะฐัะฐะตั *ยะบะพะปะธัะตััะฒะพ ะฝะตะทะฐะฝัััั ััะตะตะบ, ะบะพัะพััะตย**ะฝะต**ย**ะพััะฐะฝััััั**.*

**ะัะธะผะตั 1:**

![image](./.assets/image-1762098158117.png)

**Input:** m = 4, n = 6, guards = [[0,0],[1,1],[2,3]], walls = [[0,1],[2,2],[1,4]]
**Output:** 7
**Explanation:** The guarded and unguarded cells are shown in red and green respectively in the above diagram.
There are a total of 7 unguarded cells, so we return 7.

**ะัะธะผะตั 2:**

![image](./.assets/image-1762098172487.png)

**Input:** m = 3, n = 3, guards = [[1,1]], walls = [[0,1],[1,0],[2,1],[1,2]]
**Output:** 4
**Explanation:** The unguarded cells are shown in green in the above diagram.
There are a total of 4 unguarded cells, so we return 4.

# ะะตัะตะฝะธะต


## ๐ก ะะฝััะธัะธั

ะะดะตั ัะพััะพะธั ะฒ ัะพะผ,ย**ััะพะฑั ัะผะพะดะตะปะธัะพะฒะฐัั, ะบะฐะบ ะทัะตะฝะธะต ะบะฐะถะดะพะณะพ ะพััะฐะฝะฝะธะบะฐ ัะฐัะฟัะพัััะฐะฝัะตััั ะฟะพ ัะตัะบะต**. ะกััะฐะถ ะผะพะถะตัย**ะฒะธะดะตัั**ยะฟะพย**ัะตัััะตะผ ััะพัะพะฝะฐะผ ัะฒะตัะฐ**ยะดะพ ัะตั ะฟะพั, ะฟะพะบะฐ ะพะฝ ะฝะต ะฑัะดะตัย**ะทะฐะฑะปะพะบะธัะพะฒะฐะฝ**ยะปะธะฑะพ ะพะดะฝะธะผ, ะปะธะฑะพ ะดััะณะธะผ . ะกะปะตะดะพะฒะฐัะตะปัะฝะพ, ะตัััย**ะฟะพะผะตัะบะฐ ะฒัะตั ััะตะตะบ, ะบะพัะพััะต ะผะพะณัั ะฑััั ะฒะธะดะฝั ัะพัั ะฑั ะพะดะฝะพะน**ย. ะะฐะบ ัะพะปัะบะพ ะผั ะทะฐะบะพะฝัะธะผ ะผะฐัะบะธัะพะฒะบั, ะฒัะต, ััะพ ะตัะตย**ะฝะต ะพะฑะพะทะฝะฐัะตะฝะพ**ยะธ ะฝะตย**ะทะฐะฝััะพ a**ยะธะปะธ a, ััะธัะฐะตัััย**ะฝะตะพััะฐะฝัะตะผัะผ**. ะะพัะพะผั ััะพ ะฒัะตะผะตะฝะฐย`up, down, left, right``view``wall``guard``key``guard``cell``guard``wall``m``n`ย105**, ะฟัะพััะพะต 2D-ะผะพะดะตะปะธัะพะฒะฐะฝะธะต ะดะพััะฐัะพัะฝะพ ัััะตะบัะธะฒะฝะพ, ะบะฐะถะดะฐั ััะตะนะบะฐ ะฟะพัะตัะฐะตััั ะฝะต ะฑะพะปะตะต ะพะดะฝะพะณะพ ัะฐะทะฐ ะฒ ะบะฐะถะดะพะผ ะฝะฐะฟัะฐะฒะปะตะฝะธะธ, ััะพ ะฟัะธะฒะพะดะธั ะบ ะปะธะฝะตะนะฝะพะผั ะฒัะตะผะตะฝะฝะพะผั ัะตัะตะฝะธั**.

## ๐๐ข ะะพะดัะพะด`Step 1`ย**ะะฝะธัะธะฐะปะธะทะฐัะธั ัะตัะบะธ**

* ะกะพะทะดะฐะนัะต ัะตัะบัย**2D ะผะฐััะธะฒะฐ**ยัะฐะทะผะตัะพะผ ะธ ะทะฐะฟะพะปะฝะธัะต ะตะตย`m ร n``0`
* **ะะฟัะตะดะตะปะธัะต ัะพััะพัะฝะธั ััะตะตะบ ัะปะตะดัััะธะผ ะพะฑัะฐะทะพะผ*** `0`ยโย**ะฟััััะต ะธ ะฝะตะพััะฐะฝัะตะผัะต**
* `1`ยโย**ะฟะพะด ะพััะฐะฝะพะน**
* `2`ยโย**ะทะฐะฝัั**
* `0`ยโย**ะฟััััะต ะธ ะฝะตะพััะฐะฝัะตะผัะต**
* `1`ยโย**ะฟะพะด ะพััะฐะฝะพะน**
* `2`ยโย**ะทะฐะฝัั**

`Step 2`ย**ะัะผะตัััะต ะพะณัะฐะถะดะตะฝะธั ะธ ััะตะฝั ะฝะฐ ัะตัะบะต**

* ะะปัย**ะบะฐะถะดะพะน ะบะพะพัะดะธะฝะฐัั**ยะฒย**ะพััะฐะฝะฝะธะบะฐั**`[r, c]`* ะฝะฐะฑะพัย`grid[r][c] = 2`
* ะฝะฐะฑะพัย`grid[r][c] = 2`
* ะะปัย**ะบะฐะถะดะพะน ะบะพะพัะดะธะฝะฐัั**ยะฒย**ััะตะฝะฐั**`[r, c]`* ะฝะฐะฑะพัย`grid[r][c] = 2`
* ะฝะฐะฑะพัย`grid[r][c] = 2`
* **ะญัะธ ััะตะนะบะธ ะฟะพะผะตัะตะฝั ะบะฐะบ ะทะฐะฝัััะต ะธ ะฑัะดัั ะฑะปะพะบะธัะพะฒะฐัั ะปัะฑัั ะปะธะฝะธั ะพะฑะทะพัะฐ ะพััะฐะฝะฝะธะบะฐ.**

`Step 3`ย**ะะฟัะตะดะตะปะตะฝะธะต ะฝะฐะฟัะฐะฒะปะตะฝะธะน ะดะปั ะพะฑะทะพัะฐ ะพััะฐะฝะฝะธะบะฐ**

* ะกะพะทะดะฐะนัะตย**ะพะดะฝั ะธะท ัะตัััะตั ะฟะฐั ะฝะฐะฟัะฐะฒะปะตะฝะธะน**:ย`list`* `dirs = [(-1, 0), (0, 1), (1, 0), (0, -1)]`* ะะฒะตัั โย`(-1, 0)`
* ะัะฐะฒะธะปัะฝะพ โย`(0, 1)`
* ะะฝะธะท โย`(1, 0)`
* ะกะปะตะฒะฐ โย`(0, -1)`
* ะะฒะตัั โย`(-1, 0)`
* ะัะฐะฒะธะปัะฝะพ โย`(0, 1)`
* ะะฝะธะท โย`(1, 0)`
* ะกะปะตะฒะฐ โย`(0, -1)`
* `dirs = [(-1, 0), (0, 1), (1, 0), (0, -1)]`* ะะฒะตัั โย`(-1, 0)`
* ะัะฐะฒะธะปัะฝะพ โย`(0, 1)`
* ะะฝะธะท โย`(1, 0)`
* ะกะปะตะฒะฐ โย`(0, -1)`
* ะะฒะตัั โย`(-1, 0)`
* ะัะฐะฒะธะปัะฝะพ โย`(0, 1)`
* ะะฝะธะท โย`(1, 0)`
* ะกะปะตะฒะฐ โย`(0, -1)`

`Step 4`ย**ะะผะธัะฐัะธั ะพะฑะทะพัะฐ ะพััะฐะฝะฝะธะบะฐ**

* ะะปัย**ะบะฐะถะดะพะน ะฟะพะทะธัะธะธ ะพััะฐะฝะฝะธะบะฐ**ยะฒย`gr, gc``guards`* ะะปัย**ะบะฐะถะดะพะณะพ ะฝะฐะฟัะฐะฒะปะตะฝะธั**ยะฒย`dr, dc``dirs`* ะกะดะตะปะฐะนัะตย**ัะฐะณ ะฒ ััะพะผ**ย**ะฝะฐะฟัะฐะฒะปะตะฝะธะธ**ย`r, c = (gr + dr, gc + dc)`

* While ะฝะฐัะพะดะธััั ะฒ ะฟัะตะดะตะปะฐั ัะตัะบะธ ะธ :ย`r, c``grid[r][c] < 2`* **ะัะผะตัััะต ััะตะนะบั ะบะฐะบ ะพััะฐะฝัะตะผัั**ย`grid[r][c] = 1`

* **ะะฒะธะณะฐะนัะตัั ะดะฐะปััะต**ย`r += dr`ย`c += dc`

* **ะัะผะตัััะต ััะตะนะบั ะบะฐะบ ะพััะฐะฝัะตะผัั**ย`grid[r][c] = 1`

* **ะะฒะธะณะฐะนัะตัั ะดะฐะปััะต**ย`r += dr`ย`c += dc`

* ะกะดะตะปะฐะนัะตย**ัะฐะณ ะฒ ััะพะผ**ย**ะฝะฐะฟัะฐะฒะปะตะฝะธะธ**ย`r, c = (gr + dr, gc + dc)`

* While ะฝะฐัะพะดะธััั ะฒ ะฟัะตะดะตะปะฐั ัะตัะบะธ ะธ :ย`r, c``grid[r][c] < 2`* **ะัะผะตัััะต ััะตะนะบั ะบะฐะบ ะพััะฐะฝัะตะผัั**ย`grid[r][c] = 1`

* **ะะฒะธะณะฐะนัะตัั ะดะฐะปััะต**ย`r += dr`ย`c += dc`

* **ะัะผะตัััะต ััะตะนะบั ะบะฐะบ ะพััะฐะฝัะตะผัั**ย`grid[r][c] = 1`

* **ะะฒะธะณะฐะนัะตัั ะดะฐะปััะต**ย`r += dr`ย`c += dc`

* ะะปัย**ะบะฐะถะดะพะณะพ ะฝะฐะฟัะฐะฒะปะตะฝะธั**ยะฒย`dr, dc``dirs`* ะกะดะตะปะฐะนัะตย**ัะฐะณ ะฒ ััะพะผ**ย**ะฝะฐะฟัะฐะฒะปะตะฝะธะธ**ย`r, c = (gr + dr, gc + dc)`

* While ะฝะฐัะพะดะธััั ะฒ ะฟัะตะดะตะปะฐั ัะตัะบะธ ะธ :ย`r, c``grid[r][c] < 2`* **ะัะผะตัััะต ััะตะนะบั ะบะฐะบ ะพััะฐะฝัะตะผัั**ย`grid[r][c] = 1`

* **ะะฒะธะณะฐะนัะตัั ะดะฐะปััะต**ย`r += dr`ย`c += dc`

* **ะัะผะตัััะต ััะตะนะบั ะบะฐะบ ะพััะฐะฝัะตะผัั**ย`grid[r][c] = 1`

* **ะะฒะธะณะฐะนัะตัั ะดะฐะปััะต**ย`r += dr`ย`c += dc`

* ะกะดะตะปะฐะนัะตย**ัะฐะณ ะฒ ััะพะผ**ย**ะฝะฐะฟัะฐะฒะปะตะฝะธะธ**ย`r, c = (gr + dr, gc + dc)`

* While ะฝะฐัะพะดะธััั ะฒ ะฟัะตะดะตะปะฐั ัะตัะบะธ ะธ :ย`r, c``grid[r][c] < 2`* **ะัะผะตัััะต ััะตะนะบั ะบะฐะบ ะพััะฐะฝัะตะผัั**ย`grid[r][c] = 1`

* **ะะฒะธะณะฐะนัะตัั ะดะฐะปััะต**ย`r += dr`ย`c += dc`

* **ะัะผะตัััะต ััะตะนะบั ะบะฐะบ ะพััะฐะฝัะตะผัั**ย`grid[r][c] = 1`

* **ะะฒะธะณะฐะนัะตัั ะดะฐะปััะต**ย`r += dr`ย`c += dc`

* ะััะฐะฝะพะฒะธัะตัั**, ะบะพะณะดะฐ ะฒััะพะดะธัะต ะทะฐ ะฟัะตะดะตะปั ะฟะพะปั ะธะปะธ ะฒัะตะทะฐะตัะตัั ะฒ ััะตะฝั/ะดััะณะพะณะพ ะพััะฐะฝะฝะธะบะฐ.**

`Step 5`ย**ะะพะดััะตั ะฝะตะทะฐัะธัะตะฝะฝัั ััะตะตะบ**

* ะะฝะธัะธะฐะปะธะทะธัะพะฒะฐัั.`count = 0`

* ะัะพัะพะดะธัะต ะฟะพ ะบะฐะถะดะพะน ััะตะนะบะต ะฒ :ย`(i, j)``grid`* ะัะปะธย`grid[i][j] == 0`* ะฃะฒะตะปะธัะธัั ะฝะฐ .`count``1`
* ะฃะฒะตะปะธัะธัั ะฝะฐ .`count``1`

* ะัะปะธย`grid[i][j] == 0`* ะฃะฒะตะปะธัะธัั ะฝะฐ .`count``1`

* ะฃะฒะตะปะธัะธัั ะฝะฐ .`count``1`

* ะะฝะธย**ะฟัะตะดััะฐะฒะปััั ัะพะฑะพะน ะฒัะต ะฝะตะพััะฐะฝัะตะผัะต, ะฟััััะต**.`cells`

`Step 6`ย**ะะพะทะฒัะฐั ัะตะทัะปััะฐัะฐ**

* ะะตัะฝััั ะบะฐะบย**ะพะบะพะฝัะฐัะตะปัะฝะพะต ัะธัะปะพ ะฝะตะทะฐัะธัะตะฝะฝัั ััะตะตะบ ะฒ .**`count``grid`

```c++
class Solution 
{
public:
    int countUnguarded(int m, int n, vector<vector<int>>& guards, vector<vector<int>>& walls) 
    {

        // Step 1: Initialize the grid
        // 0 โ unguarded, 1 โ guarded, 2 โ occupied (guard or wall)
        vector<vector<int>> grid(m, vector<int>(n, 0));

        // Step 2: Mark guards and walls on the grid
        for (auto& g : guards)
        {
            grid[g[0]][g[1]] = 2;
        } 

        for (auto& w : walls)
        {
            grid[w[0]][w[1]] = 2;
        } 

        // Step 3: Define directions (up, right, down, left)
        int dr[4] = {-1, 0, 1, 0};
        int dc[4] = {0, 1, 0, -1};

        // Step 4: Simulate guard vision (ray propagation)
        for (auto& g : guards) 
        {
            int gr = g[0], gc = g[1];
            for (int d = 0; d < 4; ++d) 
            {
                int r = gr + dr[d], c = gc + dc[d];
                while (r >= 0 && r < m && c >= 0 && c < n && grid[r][c] < 2) 
                {
                    grid[r][c] = 1; // mark as guarded
                    r += dr[d];
                    c += dc[d];
                }
            }
        }

        // Step 5: Count unguarded cells
        int count = 0;
        for (int i = 0; i < m; ++i)
        {
            for (int j = 0; j < n; ++j)
            {
                if (grid[i][j] == 0)
                {
                    count++;
                } 

            }
        }

        // Step 6: Return the result
        return count;
    }
};
```









