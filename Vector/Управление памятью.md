# Управление памятью

### **`capacity`, `reserve`, `shrink_to_fit`**

Вектор имеет **размер** (`size`) — количество элементов в нём, и **ёмкость** (`capacity`) — количество элементов, под которое выделена память. Понимание этого помогает оптимизировать производительность, избегая частых перераспределений памяти.

* `reserve(n)`: Заранее выделяет память под `n` элементов, чтобы избежать многократных аллокаций при добавлении элементов.
* `shrink_to_fit()`: Освобождает неиспользуемую память, чтобы `capacity` стало равно `size`.

```c++
#include <iostream>
#include <vector>

int main() {
    std::vector<int> vec;

    std::cout << "Начальный размер: " << vec.size() << ", Начальная ёмкость: " << vec.capacity() << std::endl;

    // Резервируем память под 100 элементов
    vec.reserve(100);
    std::cout << "После reserve(100): Размер: " << vec.size() << ", Ёмкость: " << vec.capacity() << std::endl;

    // Добавим несколько элементов
    std::cout << "\nДобавим 5 элементов..." << std::endl;
    for (int i = 0; i < 5; ++i) {
        vec.push_back(i);
    }

    std::cout << "После добавления 5 элементов: Размер: " << vec.size() << ", Ёмкость: " << vec.capacity() << std::endl;

    // Уменьшаем ёмкость до размера
    vec.shrink_to_fit();
    std::cout << "После shrink_to_fit(): Размер: " << vec.size() << ", Ёмкость: " << vec.capacity() << std::endl;

    return 0;
}
```

